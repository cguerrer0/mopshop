<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:rich="http://richfaces.org/rich">

    <body>
    <h:head>
	<title><h:outputText value="#{i18n['home.head.title']}" /></title>
	</h:head>

    <ui:composition template="/pages/template/layout.xhtml">
            <ui:define name="content">

                <h:panelGroup styleClass="errores">
                    <h:messages layout="table" />
                </h:panelGroup>


                    <h:form rendered="#{empty userBean.currentCustomer}"> 
                    <h3> <h:outputText value="No está conectado/a" /> </h3>
                    <h4> <h:outputText value="Para confirmar el pedido debe iniciar sesión o registrarse."/> </h4>
                    <ul>
                        <li> <h:commandLink value="#{i18n['common.init_session']}" action="login"/> </li>
                        <li> <h:commandLink value="#{i18n['Create user']}" action="#{userBean.doCreateUser()}"/> </li>
                    </ul>
      			</h:form> 
      			
			
                <h:form rendered="#{not empty userBean.currentCustomer}">
                <rich:panel>
			        <f:facet name="header">
			            <h:outputText value="#{i18n['client.data']}" />
			        </f:facet>
                   
                        <p> <h:outputText value="" style="font-weight: bold;"/> </p>

                        <h:panelGrid frame="box" border="1" columns="2">
                            <h:outputLabel value="#{i18n['commun.name']}:" for="nombre" style="font-weight: bold;"/>
                            <h:outputText id="nombre" value="#{userBean.currentCustomer.name}"/>

                            <h:outputLabel value="#{i18n['common.surname']}:" for="apellidos" style="font-weight: bold;"/>
                            <h:outputText id="apellidos" value="#{userBean.currentCustomer.surname}"/>
<!-- 
                            <h:outputLabel value="#{i18n['common.nif']}:" for="nif" style="font-weight: bold;"/>
                            <h:outputText id="nif" value="#{userBean.clienteActual.nif}"/>

                            <h:outputLabel value="#{i18n['common.address']}:" for="domicilio" style="font-weight: bold;"/>
                            <h:outputText id="domicilio" value="#{userBean.clienteActual.domicilio}"/>

                            <h:outputLabel value="#{i18n['common.postal_code']}:" for="codPostal" style="font-weight: bold;"/>
                            <h:outputText id="codPostal" value="#{userBean.clienteActual.codPostal}"/>

                            <h:outputLabel value="#{i18n['common.telephone']}:" for="telefono" style="font-weight: bold;"/>
                            <h:outputText id="telefono" value="#{userBean.clienteActual.telefono}"/>

                            <h:outputLabel value="#{i18n['common.email']}:" for="email" style="font-weight: bold;"/>
                            <h:outputText id="email" value="#{userBean.clienteActual.email}"/> -->
                        </h:panelGrid>
                    </rich:panel>
                </h:form>

                <h3>
                    <h:outputText value="#{i18n['product.products']}"
                                  rendered="#{empty shoppingCartBean.products}"/>
                </h3>

                <h:form rendered="#{not empty shoppingCartBean.products}">
                  <rich:panel>
			        <f:facet name="header">
			            <h:outputText value="#{i18n['product.products']}" />
			        </f:facet>
                      <rich:dataTable var="productBuy" value="#{shoppingCartBean.products}"
                                     border="0" cellpadding="4" cellspacing="0" rules="all" style="border:solid 1px">
                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.family']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.product.family.name}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.description']}"/>
                                </f:facet>
                                <h:commandLink action="#{catalogBean.doCheckCurrentProduct(productBuy.product.id)}"
                                               value="#{productBuy.product.description}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.brand']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.product.brand}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.model']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.product.model}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.number']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.number}"/>
                            </rich:column>

                            <rich:column>
                                <h:commandLink action="#{shoppingCartBean.doIncNumber(productBuy.product.id)}"
                                               value="++ #{i18n['product.number']}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['product.price']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.product.price}"/>
                            </rich:column>

                            <rich:column>
                                <f:facet name="header">
                                    <h:outputText value="#{i18n['order.product.amount']}"/>
                                </f:facet>
                                <h:outputText value="#{productBuy.number * productBuy.product.price}"/>
                            </rich:column>

                            <rich:column>
                                <h:commandLink action="#{shoppingCartBean.doDeleteProduct(productBuy.product.id)}"
                                               value="#{i18n['product.delete_product']}"/>
                            </rich:column>
                        </rich:dataTable>

                  </rich:panel>



                    <h4><h:outputText value="Total compra: "/> <h:outputText value="#{shoppingCartBean.totalAmount}"/></h4>


                    <h:panelGrid columns="3">
                        <h:commandButton action="#{shoppingCartBean.doConfirmCart()}" value="#{i18n['order.confirm_order']}"/>
                        <h:commandButton action="#{shoppingCartBean.doClearCart()}" value="#{i18n['order.clear_shopping_cart']}"/>
                        <h:commandButton action="products.xhtml" value="#{i18n['product.follow_buy']}"/>
                    </h:panelGrid>
                </h:form>
              

            </ui:define>

        </ui:composition>

    </body>
</html>
